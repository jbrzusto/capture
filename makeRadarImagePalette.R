#!/usr/bin/Rscript
#
# This generates the file radarImagePalette.rds, whose contents are an integer vector of length 256.
# Each integer represents palette as 0xAABBGGRR, where AA is alpha, and the rest are the red, green,
# and blue components.
#
# Samples values are mapped to colour values like so:
# i = sample / 16
# (i is the zero-based index into the palette).  This converts a 12 bit sample value into
# an 8 bit palette value.  For now, no dithering.
#
# Because of the current DC bias in the video signal, samples values don't go much below 2048, so
# we make the first chunk of the palette be transparent, for a cleaner overlay image.
# Then we ramp through colours and increasing opacity.

# The easiest way to generate the colour values is to use the palette editor in radR, then
# do from the radR console
#
#  cat(deparse(RSS$palette.mat[, 3]), "\n")
#
# where '3' will need to be chosen to find the particular palette you've edited.
pal = c(-16777216L, -16711423L, -16645630L, -16579837L, -16514044L,  -16448251L, -16382458L, -16316665L, -16250872L, -16185079L, -16119286L,  -16053493L, -15987700L, -15921907L, -15856114L, -15790321L, -15724528L,  -15658735L, -15592942L, -15527149L, -15461356L, -15395563L, -15329770L,  -15263977L, -15198184L, -15132391L, -15066598L, -15000805L, -14935012L,  -14869219L, -14803426L, -14737633L, -14671840L, -14606047L, -14540254L,  -14474461L, -14408668L, -14342875L, -14277082L, -14211289L, -14145496L,  -14079703L, -14013910L, -13948117L, -13882324L, -13816531L, -13750738L,  -13684945L, -13619152L, -13553359L, -13487566L, -13421773L, -13355980L,  -13290187L, -13224394L, -13158601L, -13092808L, -13027015L, -12961222L,  -12895429L, -12829636L, -12763843L, -12698050L, -12632257L, -12566464L,  -12500671L, -12434878L, -12369085L, -12303292L, -12237499L, -12171706L,  -12105913L, -12040120L, -11974327L, -11908534L, -11842741L, -11776948L,  -11711155L, -11645362L, -11579569L, -11513776L, -11447983L, -11382190L,  -11316397L, -11250604L, -11184811L, -11119018L, -11053225L, -10987432L,  -10921639L, -10855846L, -10790053L, -10724260L, -10658467L, -10592674L,  -10526881L, -10461088L, -10395295L, -10329502L, -10263709L, -10197916L,  -10132123L, -10066330L, -10000537L, -9934744L, -9868951L, -9803158L,  -9737365L, -9671572L, -9605779L, -9539986L, -9474193L, -9408400L,  -9342607L, -9276814L, -9211021L, -9145228L, -9079435L, -9013642L,  -8947849L, -8882056L, -8816263L, -8750470L, -8684677L, -8618884L,  -8553091L, -8487298L, -8421505L, -8355712L, -8289919L, -8224126L,  -8158333L, -8092540L, -8026747L, -7960954L, -7895161L, -7829368L,  -7763575L, -7697782L, -7631989L, -7566196L, -7500403L, -7434610L,  -7368817L, -7303024L, -7237231L, -7171438L, -7105645L, -7039852L,  -6974059L, -6908266L, -6842473L, -6776680L, -6710887L, -6645094L,  -6579301L, -6513508L, -6447715L, -6381922L, -6316129L, -6250336L,  -6184543L, -6118750L, -6052957L, -5987164L, -5921371L, -5855578L,  -5789785L, -5723992L, -5658199L, -5592406L, -5526613L, -5460820L,  -5395027L, -5329234L, -5263441L, -5197648L, -5131855L, -5066062L,  -5000269L, -4934476L, -4868683L, -4802890L, -4737097L, -4671304L,  -4605511L, -4539718L, -4473925L, -4408132L, -4342339L, -4276546L,  -4210753L, -4144960L, -4079167L, -4013374L, -3947581L, -3881788L,  -3815995L, -3750202L, -3684409L, -3618616L, -3552823L, -3487030L,  -3421237L, -3355444L, -3289651L, -3223858L, -3158065L, -3092272L,  -3026479L, -2960686L, -2894893L, -2829100L, -2763307L, -2697514L,  -2631721L, -2565928L, -2500135L, -2434342L, -2368549L, -2302756L,  -2236963L, -2171170L, -2105377L, -2039584L, -1973791L, -1907998L,  -1842205L, -1776412L, -1710619L, -1644826L, -1579033L, -1513240L,  -1447447L, -1381654L, -1315861L, -1250068L, -1184275L, -1118482L,  -1052689L, -986896L, -921103L, -855310L, -789517L, -723724L,  -657931L, -592138L, -526345L, -460552L, -394759L, -328966L, -263173L,  -197380L, -131587L, -65794L, -1L) 

## pal = c(-16777216L, -16711423L, -16645630L, -16579837L, -16514044L,  -16448251L, -16382458L, -16316665L, -16250872L, -16185079L, -16119286L,  -16053493L, -15987700L, -15921907L, -15856114L, -15790321L, -15724528L,  -15658735L, -15592942L, -15527149L, -15461356L, -15395563L, -15329770L,  -15263977L, -15198184L, -15132391L, -15066598L, -15000805L, -14935012L,  -14869219L, -14803426L, -14737633L, -14671840L, -14606047L, -14540254L,  -14474461L, -14408668L, -14342875L, -14277082L, -14211289L, -14145496L,  -14079703L, -14013910L, -13948117L, -13882324L, -13816531L, -13750738L,  -13684945L, -13619152L, -13553359L, -13487566L, -13421773L, -13355980L,  -13290187L, -13224394L, -13158601L, -13092808L, -13027015L, -12961222L,  -12895429L, -12829636L, -12763843L, -12698050L, -12632257L, -12566464L,  -12500671L, -12434878L, -12369085L, -12303292L, -12237499L, -12171706L,  -12105913L, -12040120L, -11974327L, -11908534L, -11842741L, -11776948L,  -11711155L, -11645362L, -11579569L, -11513776L, -11447983L, -11382190L,  -11316397L, -11250604L, -11184811L, -11119018L, -11053225L, -10987432L,  -10921639L, -10855846L, -10790053L, -10724260L, -10658467L, -10592674L,  -10526881L, -10461088L, -10395295L, -10329502L, -10263709L, -10197916L,  -10132123L, -10066330L, -10000537L, -9934744L, -9868951L, -9803158L,  -9737365L, -9671572L, -9605779L, -9539986L, -9474193L, -9408400L,  -9342607L, -9276814L, -9211021L, -9145228L, -9079435L, -9013642L,  -8947849L, -8882056L, -8816263L, -8750470L, -8684677L, -8618884L,  -8553091L, -8487298L, -8421505L, -8355712L, -8289919L, -8224126L,  -8158333L, -8092540L, -8026747L, -7960954L, -7895161L, -7829368L,  -7763575L, -7697782L, -7631989L, -7566196L, -7500403L, -7434610L,  -7368817L, -7303024L, -7237231L, -7171438L, -7105645L, -7039852L,  -6974059L, -6908266L, -6842473L, -6776680L, -6710887L, -6645094L,  -6579301L, -6513508L, -6447715L, -6381922L, -6316129L, -6250336L,  -6184543L, -6118750L, -6052957L, -5987164L, -5921371L, -5855578L,  -5789785L, -5723992L, -5658199L, -5592406L, -5526613L, -5460820L,  -5395027L, -5329234L, -5263441L, -5197648L, -5131855L, -5066062L,  -5000269L, -4934476L, -4868683L, -4802890L, -4737097L, -4671304L,  -4605511L, -4539718L, -4473925L, -4408132L, -4342339L, -4276546L,  -4210753L, -4144960L, -4079167L, -4013374L, -3947581L, -3881788L,  -3815995L, -3750202L, -3684409L, -3618616L, -3552823L, -3487030L,  -3421237L, -3355444L, -3289651L, -3223858L, -3158065L, -3092272L,  -3026479L, -2960686L, -2894893L, -2829100L, -2763307L, -2697514L,  -2631721L, -2565928L, -2500135L, -2434342L, -2368549L, -2302756L,  -2236963L, -2171170L, -2105377L, -2039584L, -1973791L, -1907998L,  -1842205L, -1776412L, -1710619L, -1644826L, -1579033L, -1513240L,  -1447447L, -1381654L, -1315861L, -1250068L, -1184275L, -1118482L,  -1052689L, -986896L, -921103L, -855310L, -789517L, -723724L,  -657931L, -592138L, -526345L, -460552L, -394759L, -328966L, -263173L,  -197380L, -131587L, -65794L, -1L)

## pal = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 135135232L,  439156736L, 759955456L, 1063976960L, 1367998464L, 1688862720L,  1992884224L, -1998061568L, -1744894720L, -1677780224L, -1610665984L,  -1543551744L, -1459660288L, -1392546048L, -1325431808L, -1258317568L,  -1191203328L, -1124089088L, -1056974848L, -973083136L, -922878208L,  -873267456L, -840433920L, -790823168L, -757989632L, -725221632L,  -675610880L, -642777344L, -593166592L, -560333056L, -527499520L,  -477888768L, -445055232L, -395444480L, -362676480L, -329842944L,  -280232192L, -247398656L, -197787904L, -164954368L, -132120832L,  -82510080L, -49742080L, -16712189L, -16712946L, -16713702L, -16714459L,  -16715215L, -16715972L, -16716728L, -16717485L, -16718241L, -16718998L,  -16719754L, -16720767L, -16721523L, -16722280L, -16723036L, -16723793L,  -16724549L, -16725306L, -16726062L, -16726819L, -16727575L, -16728331L,  -16729345L, -16731137L, -16733185L, -16735233L, -16737281L, -16739073L,  -16741121L, -16743169L, -16745217L, -16747009L, -16749057L, -16751105L,  -16753153L, -16754945L, -16756993L, -16759041L, -16761089L, -16762881L,  -16764929L, -16766977L, -16768769L, -16770817L, -16772865L, -16774913L,  -16776705L, -100007681L, -183238401L, -266403585L, -349634305L,  -449576705L, -532807425L, -616038145L, -699203329L, -799211265L,  -882376449L, -965607169L, -1048772353L, -1132003073L, -1231945473L,  -1315176193L, -1398341377L, -1481572097L, -1564737281L, -1664745217L,  -1747910401L, -1831141121L, -1914371841L, -2014314241L, -2097544961L )


## pal = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 50593792L, 151977984L, 253362176L, 371523584L, 472907776L,  574226432L, 692387840L, 793772032L, 895156224L, 1013317632L,  1114636288L, 1232797696L, 1334181888L, 1435566080L, 1553727488L,  1655111680L, 1756430336L, 1874591744L, 1975975936L, 2077360128L,  -2099445760L, -1998127104L, -1879965696L, -1778581504L, -1744894464L,  -1711337984L, -1694558720L, -1661002240L, -1644222976L, -1610666496L,  -1577110016L, -1560330752L, -1526774272L, -1509995264L, -1476438784L,  -1459659520L, -1426103040L, -1409323776L, -1375767296L, -1358988032L,  -1325431552L, -1291875328L, -1275096064L, -1241539584L, -1224760320L,  -1191203840L, -1174424576L, -1140868096L, -1124088832L, -1090532608L,  -1073753344L, -1040196864L, -1006640384L, -989861120L, -956304640L,  -939525376L, -906232064L, -873332992L, -840433920L, -807534848L,  -757858560L, -724959488L, -692060416L, -659161344L, -626262272L,  -593363200L, -560464128L, -527499520L, -477823232L, -444924160L,  -412025088L, -379126016L, -346226944L, -313327872L, -280428800L,  -230752512L, -197853440L, -164954368L, -132055296L, -99090688L,  -66191616L, -33292544L, -16712184L, -16712430L, -16712675L, -16712921L,  -16713166L, -16713412L, -16713913L, -16714159L, -16714404L, -16714650L,  -16714895L, -16715141L, -16715386L, -16715888L, -16716133L, -16716378L,  -16716624L, -16716869L, -16717115L, -16717360L, -16717606L, -16718107L,  -16718353L, -16718598L, -16718853L, -16719109L, -16719365L, -16719621L,  -16720132L, -16720388L, -16720644L, -16720900L, -16721156L, -16721412L,  -16721668L, -16722180L, -16722436L, -16722691L, -16722947L, -16723203L,  -16723459L, -16723971L, -16724227L, -16724483L, -16724739L, -16724995L,  -16725250L, -16725506L, -16726018L, -16726274L, -16726530L, -16726786L,  -16727042L, -16727298L, -16727554L, -16728065L, -16728321L, -16728577L,  -16728833L, -16729345L, -16731393L, -16733441L, -16735489L, -16737537L,  -16739841L, -16741889L, -16743937L, -16745985L, -16748033L, -16750081L,  -16752129L, -16754177L, -16756225L, -16758273L, -16760321L, -16762625L,  -16764673L, -16766721L, -16768769L, -16770817L, -16772865L, -16774913L,  -16776961L, -100007681L, -183303937L, -266534657L, -332988161L,  -416284417L, -499515137L, -582745857L, -666042113L, -732495617L,  -815726337L, -899022593L, -982253313L, -1065484033L, -1132003073L,  -1215233793L, -1298530049L, -1381760769L, -1464991489L, -1531510529L,  -1614741249L, -1697971969L, -1781268225L, -1847721729L, -1930952449L,  -2014248705L, -2097479425L)

## pal = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,  0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 33554944L, 67109888L,  100664832L, 134219776L, 150997248L, 184552192L, 218107136L, 251662080L,  285217024L, 318771968L, 352326912L, 385881856L, 419436800L, 436214272L,  469769216L, 503324160L, 536879104L, 570434048L, 603988992L, 637543936L,  671098880L, 704653824L, 721431296L, 754986240L, 788541184L, 822096128L,  855651072L, 889206016L, 922760960L, 956315904L, 989870848L, 1006648320L,  1040203264L, 1073758208L, 1107313152L, 1140868096L, 1174423040L,  1207977984L, 1241532928L, 1275087872L, 1291865344L, 1325420288L,  1358975232L, 1392530176L, 1426085120L, 1459640064L, 1493195008L,  1526749952L, 1560304896L, 1577082368L, 1610637312L, 1644192256L,  1677747200L, 1711302144L, 1744857088L, 1778412032L, 1811966976L,  1845521920L, 1862299392L, 1895854336L, 1929409280L, 1962964224L,  1996519168L, 2030074112L, 2063629056L, 2097184000L, 2130738944L,  -2147450880L, -2113895936L, -2080340992L, -2046786048L, -2013231104L,  -1979676160L, -1946121216L, -1912566272L, -1879011328L, -1862233856L,  -1828678912L, -1795123968L, -1761569024L, -1728014080L, -1694459136L,  -1660904192L, -1627349248L, -1593794304L, -1577016832L, -1543461888L,  -1509906944L, -1476352000L, -1442797056L, -1409242112L, -1375687168L,  -1342132224L, -1308577280L, -1291799808L, -1258244864L, -1224689920L,  -1191134976L, -1157580032L, -1124025088L, -1090470144L, -1056915200L,  -1023360256L, -1006582784L, -973027840L, -939472896L, -905917952L,  -872363008L, -838808064L, -805253120L, -771698176L, -738143232L,  -721365760L, -687810816L, -654255872L, -620700928L, -587145984L,  -553591040L, -520036096L, -486481152L, -452926208L, -436148736L,  -402593792L, -369038848L, -335483904L, -301928960L, -268374016L,  -234819072L, -201264128L, -167709184L, -150931712L, -117376768L,  -83821824L, -50266880L, -16711936L)

## pal = c(-16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16777216L, -16777216L,  -16777216L, -16777216L, -16777216L, -16777216L, -16711423L, -16645630L,  -16514044L, -16382458L, -16250872L, -16119286L, -15987700L, -15856114L,  -15724528L, -15592942L, -15461356L, -15329770L, -15198184L, -15066598L,  -14935012L, -14869219L, -14737633L, -14606047L, -14474461L, -14342875L,  -14211289L, -14079703L, -13948117L, -13816531L, -13684945L, -13553359L,  -13421773L, -13290187L, -13158601L, -13092808L, -12961222L, -12829636L,  -12698050L, -12566464L, -12434878L, -12303292L, -12171706L, -12040120L,  -11908534L, -11776948L, -11645362L, -11513776L, -11447983L, -11316397L,  -11184811L, -11053225L, -10921639L, -10790053L, -10658467L, -10526881L,  -10395295L, -10263709L, -10132123L, -10000537L, -9868951L, -9737365L,  -9671572L, -9539986L, -9408400L, -9276814L, -9145228L, -9013642L,  -8882056L, -8750470L, -8618884L, -8487298L, -8355712L, -8224126L,  -8092540L, -7960954L, -7895161L, -7763575L, -7631989L, -7500403L,  -7368817L, -7237231L, -7105645L, -6974059L, -6842473L, -6710887L,  -6579301L, -6447715L, -6316129L, -6184543L, -6118750L, -5987164L,  -5855578L, -5723992L, -5592406L, -5460820L, -5329234L, -5197648L,  -5066062L, -4934476L, -4802890L, -4671304L, -4539718L, -4408132L,  -4342339L, -4210753L, -4079167L, -3947581L, -3815995L, -3684409L,  -3552823L, -3421237L, -3289651L, -3158065L, -3026479L, -2894893L,  -2763307L, -2631721L, -2565928L, -2434342L, -2302756L, -2171170L,  -2039584L, -1907998L, -1776412L, -1644826L, -1513240L, -1381654L,  -1250068L, -1118482L, -986896L, -855310L, -789517L, -657931L,  -526345L, -394759L, -263173L, -131587L, -1L)

saveRDS(pal, "/home/radar/capture/radarImagePalette.rds")
